version: "3.1"

rules:
- rule: Greet
  steps:
  - intent: greet
  - action: utter_greet
- rule: Activate flight booking form
  steps:
  - intent: book_flight
  - action: flight_booking_form
  - active_loop: flight_booking_form

- rule: Submit flight booking form
  condition:
  - active_loop: flight_booking_form
  steps:
  - action: flight_booking_form
  - active_loop: null
  - action: action_submit_booking


- rule: Clear chat
  steps:
  - intent: clear_chat
  - action: action_cache

- rule: Start booking lookup
  steps:
  - intent: check_booking
  - action: action_ask_lookup

- rule: Perform booking lookup
  steps:
  - action: action_ask_lookup
  - intent: inform_phone_number
  - action: action_lookup_booking

- rule: NLU fallback
  steps:
  - intent: nlu_fallbacks
  - action: utter_nlu_fallbacks

- rule: Thank you
  steps:
  - intent: thank_you
  - action: utter_thank_you

